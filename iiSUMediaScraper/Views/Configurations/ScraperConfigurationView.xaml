<?xml version="1.0" encoding="utf-8"?>
<UserControl x:Class="iiSUMediaScraper.Views.Configurations.ScraperConfigurationView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:local="using:iiSUMediaScraper.Views.Configurations"
             xmlns:configurationviewmodels="using:iiSUMediaScraper.ViewModels.Configurations"
             xmlns:customconverters="using:iiSUMediaScraper.Converters"
             xmlns:controls="using:CommunityToolkit.WinUI.Controls"
             mc:Ignorable="d">

    <UserControl.Resources>
        <customconverters:EqualsStringToVisibilityConverter x:Key="SteamGridDbVisibilityConverter"
                                                            EqualsValue="SteamGridDb" />

        <customconverters:NotEqualsStringToVisibilityConverter x:Key="NotSteamGridDbVisibilityConverter"
                                                               NotEqualsValue="SteamGridDb" />

        <customconverters:CanFetchImagesToVisibilityConverter x:Key="CanFetchImagesToVisibilityConverter" />

        <customconverters:CanFetchMusicToVisibilityConverter x:Key="CanFetchMusicToVisibilityConverter" />

        <customconverters:CanFetchVideosToVisibilityConverter x:Key="CanFetchVideosToVisibilityConverter" />

        <customconverters:CanEnterPlatformIdentifiersToVisibilityConverter x:Key="CanEnterPlatformIdentifiersToVisibilityConverter" />

        <DataTemplate x:Key="PlatformTranslationConfigurationTemplate"
                      x:DataType="configurationviewmodels:PlatformTranslationConfigurationViewModel">
            <local:PlatformTranslationConfigurationView ViewModel="{x:Bind Mode=OneWay}" />
        </DataTemplate>
    </UserControl.Resources>

    <StackPanel Background="{x:Bind Background, Mode=OneWay}"
                BorderBrush="{x:Bind BorderBrush, Mode=OneWay}"
                BorderThickness="{x:Bind BorderThickness, Mode=OneWay}"
                CornerRadius="{x:Bind CornerRadius, Mode=OneWay}"
                Padding="{x:Bind Padding, Mode=OneWay}">
        <TextBlock Text="{x:Bind ViewModel.Source, Mode=OneWay}"
                   FontSize="22"
                   Margin="0,0,0,16" />
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <StackPanel>
                <ToggleSwitch OffContent="Fetch"
                              OnContent="Fetch"
                              ToolTipService.ToolTip="Global fetch for the scraper. Setting this to off will disable all other fetch settings even if they are on"
                              Margin="0,0,0,8"
                              IsOn="{x:Bind ViewModel.IsFetch, Mode=TwoWay}" />
                <Grid Visibility="{x:Bind ViewModel.Source, Mode=OneWay, Converter={StaticResource CanFetchImagesToVisibilityConverter}}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="auto" />
                    </Grid.RowDefinitions>
                    <ToggleSwitch OffContent="Fetch icons"
                                  OnContent="Fetch icons"
                                  Margin="0,0,0,8"
                                  IsOn="{x:Bind ViewModel.IsFetchIcons, Mode=TwoWay}" />
                    <ToggleSwitch OffContent="Fetch icons if none found"
                                  OnContent="Fetch icons if none found"
                                  Margin="0,0,0,8"
                                  Grid.Column="1"
                                  IsOn="{x:Bind ViewModel.IsFetchIconsIfNoneFound, Mode=TwoWay}" />
                    <ToggleSwitch OffContent="Fetch logos"
                                  OnContent="Fetch logos"
                                  Margin="0,0,0,8"
                                  Grid.Row="1"
                                  IsOn="{x:Bind ViewModel.IsFetchLogos, Mode=TwoWay}" />
                    <ToggleSwitch OffContent="Fetch logos if none found"
                                  OnContent="Fetch logos if none found"
                                  Margin="0,0,0,8"
                                  Grid.Row="1"
                                  Grid.Column="1"
                                  IsOn="{x:Bind ViewModel.IsFetchLogosIfNoneFound, Mode=TwoWay}" />
                    <ToggleSwitch OffContent="Fetch titles"
                                  OnContent="Fetch titles"
                                  Margin="0,0,0,8"
                                  Grid.Row="2"
                                  IsOn="{x:Bind ViewModel.IsFetchTitles, Mode=TwoWay}" />
                    <ToggleSwitch OffContent="Fetch titles if none found"
                                  OnContent="Fetch titles if none found"
                                  Margin="0,0,0,8"
                                  Grid.Row="2"
                                  Grid.Column="1"
                                  IsOn="{x:Bind ViewModel.IsFetchTitlesIfNoneFound, Mode=TwoWay}" />
                    <ToggleSwitch OffContent="Fetch heros"
                                  OnContent="Fetch heros"
                                  Margin="0,0,0,8"
                                  Grid.Row="3"
                                  IsOn="{x:Bind ViewModel.IsFetchHeros, Mode=TwoWay}" />
                    <ToggleSwitch OffContent="Fetch heros if none found"
                                  OnContent="Fetch heros if none found"
                                  Margin="0,0,0,8"
                                  Grid.Row="3"
                                  Grid.Column="1"
                                  IsOn="{x:Bind ViewModel.IsFetchHerosIfNoneFound, Mode=TwoWay}" />
                    <ToggleSwitch OffContent="Fetch slides"
                                  OnContent="Fetch slides"
                                  Margin="0,0,0,8"
                                  Grid.Row="4"
                                  IsOn="{x:Bind ViewModel.IsFetchSlides, Mode=TwoWay}" />
                    <ToggleSwitch OffContent="Fetch slides if none found"
                                  OnContent="Fetch slides if none found"
                                  Margin="0,0,0,8"
                                  Grid.Row="4"
                                  Grid.Column="1"
                                  IsOn="{x:Bind ViewModel.IsFetchSlidesIfNoneFound, Mode=TwoWay}" />
                </Grid>
                <ToggleSwitch OffContent="Fetch videos"
                              OnContent="Fetch videos"
                              Margin="0,0,0,8"
                              Visibility="{x:Bind ViewModel.Source, Mode=OneWay, Converter={StaticResource CanFetchVideosToVisibilityConverter}}"
                              IsOn="{x:Bind ViewModel.IsFetchVideos, Mode=TwoWay}" />
                <ToggleSwitch OffContent="Fetch music"
                              OnContent="Fetch music"
                              Margin="0,0,0,8"
                              Visibility="{x:Bind ViewModel.Source, Mode=OneWay, Converter={StaticResource CanFetchMusicToVisibilityConverter}}"
                              IsOn="{x:Bind ViewModel.IsFetchMusic, Mode=TwoWay}" />
                <ToggleSwitch OffContent="Allow title as icon when no icon found"
                              OnContent="Allow title as icon when no icon found"
                              ToolTipService.ToolTip="If no icon is found pick the best title and crop"
                              Margin="0,0,0,8"
                              Visibility="{x:Bind ViewModel.Source, Mode=OneWay, Converter={StaticResource CanFetchImagesToVisibilityConverter}}"
                              IsOn="{x:Bind ViewModel.IsAllowTitleAsIconWhenNoIconFound, Mode=TwoWay}" />
                <ToggleSwitch OffContent="Use square icon priority"
                              OnContent="Use square icon priority"
                              ToolTipService.ToolTip="Square icons have priority over other non square assets for titles and icons"
                              Margin="0,0,0,8"
                              Visibility="{x:Bind ViewModel.Source, Mode=OneWay, Converter={StaticResource CanFetchImagesToVisibilityConverter}}"
                              IsOn="{x:Bind ViewModel.IsUseSquareIconPriority, Mode=TwoWay}" />
            </StackPanel>
        </Grid>
        <controls:WrapPanel Visibility="{x:Bind ViewModel.Source, Mode=OneWay, Converter={StaticResource CanFetchImagesToVisibilityConverter}}"
                            HorizontalSpacing="16"
                            VerticalSpacing="16"
                            Margin="0,0,0,16">
            <NumberBox Header="Icon Priority"
                       Width="160"
                       SpinButtonPlacementMode="Compact"
                       ToolTipService.ToolTip="Priority for using assets found via this scraper vs others"
                       HorizontalAlignment="Left"
                       Value="{x:Bind ViewModel.IconPriority, Mode=TwoWay}" />
            <NumberBox Header="Title Priority"
                       Width="160"
                       SpinButtonPlacementMode="Compact"
                       ToolTipService.ToolTip="Priority for using assets found via this scraper vs others"
                       HorizontalAlignment="Left"
                       Value="{x:Bind ViewModel.TitlePriority, Mode=TwoWay}" />
            <NumberBox Header="Hero Priority"
                       Width="160"
                       SpinButtonPlacementMode="Compact"
                       ToolTipService.ToolTip="Priority for using assets found via this scraper vs others"
                       HorizontalAlignment="Left"
                       Value="{x:Bind ViewModel.HeroPriority, Mode=TwoWay}" />
            <NumberBox Header="Slide Priority"
                       Width="160"
                       SpinButtonPlacementMode="Compact"
                       ToolTipService.ToolTip="Priority for using assets found via this scraper vs others"
                       HorizontalAlignment="Left"
                       Value="{x:Bind ViewModel.SlidePriority, Mode=TwoWay}" />
        </controls:WrapPanel>
        <controls:WrapPanel Visibility="{x:Bind ViewModel.Source, Mode=OneWay, Converter={StaticResource CanFetchImagesToVisibilityConverter}}"
                            HorizontalSpacing="16"
                            VerticalSpacing="16"
                            Margin="0,0,0,16">
            <NumberBox Header="Icon Fetch Limit"
                       Width="160"
                       SpinButtonPlacementMode="Compact"
                       ToolTipService.ToolTip="The maximum number of icons the application will fetch"
                       HorizontalAlignment="Left"
                       Value="{x:Bind ViewModel.IconFetchLimit, Mode=TwoWay}" />
            <NumberBox Header="Title Fetch Limit"
                       Width="160"
                       SpinButtonPlacementMode="Compact"
                       ToolTipService.ToolTip="The maximum number of titles the application will fetch"
                       HorizontalAlignment="Left"
                       Value="{x:Bind ViewModel.TitleFetchLimit, Mode=TwoWay}" />
            <NumberBox Header="Hero Fetch Limit"
                       Width="160"
                       SpinButtonPlacementMode="Compact"
                       ToolTipService.ToolTip="The maximum number of heros the application will fetch"
                       HorizontalAlignment="Left"
                       Value="{x:Bind ViewModel.HeroFetchLimit, Mode=TwoWay}" />
            <NumberBox Header="Slide Fetch Limit"
                       Width="160"
                       SpinButtonPlacementMode="Compact"
                       ToolTipService.ToolTip="The maximum number of slides the application will fetch"
                       HorizontalAlignment="Left"
                       Value="{x:Bind ViewModel.SlideFetchLimit, Mode=TwoWay}" />
            <NumberBox Header="Logo Fetch Limit"
                       Width="160"
                       SpinButtonPlacementMode="Compact"
                       ToolTipService.ToolTip="The maximum number of logos the application will fetch"
                       HorizontalAlignment="Left"
                       Value="{x:Bind ViewModel.LogoFetchLimit, Mode=TwoWay}" />
        </controls:WrapPanel>
        <StackPanel Visibility="{x:Bind ViewModel.Source, Mode=OneWay, Converter={StaticResource SteamGridDbVisibilityConverter}}">
            <TextBox Header="Icon Styles"
                     Margin="0,0,0,16"
                     PlaceholderText=", seperated styles"
                     Text="{x:Bind ViewModel.IconStyles, Mode=TwoWay}" />
            <TextBox Header="Logo Styles"
                     Margin="0,0,0,16"
                     PlaceholderText=", seperated styles"
                     Text="{x:Bind ViewModel.LogoStyles, Mode=TwoWay}" />
            <TextBox Header="Title Styles"
                     Margin="0,0,0,16"
                     PlaceholderText=", seperated styles"
                     Text="{x:Bind ViewModel.TitleStyles, Mode=TwoWay}" />
            <TextBox Header="Hero Styles"
                     Margin="0,0,0,16"
                     PlaceholderText=", seperated styles"
                     Text="{x:Bind ViewModel.HeroStyles, Mode=TwoWay}" />
            <TextBox Header="Slide Styles"
                     PlaceholderText=", seperated styles"
                     Text="{x:Bind ViewModel.SlideStyles, Mode=TwoWay}" />
        </StackPanel>
        <Border Padding="16"
                CornerRadius="8"
                Background="{ThemeResource LayerFillColorDefaultBrush}"
                MaxHeight="600"
                VerticalAlignment="Top"
                Margin="0,0,0,16"
                Visibility="{x:Bind ViewModel.Source, Mode=OneWay, Converter={StaticResource CanEnterPlatformIdentifiersToVisibilityConverter}}">
            <StackPanel>
                <Grid Margin="0,0,0,16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="auto" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="Platform Identifiers"
                               FontSize="18"
                               Margin="0,0,0,16"
                               ToolTipService.ToolTip="Platform identifier for scraper. Used to find platform specific games" />
                    <Button Grid.Column="1"
                            Height="32"
                            Width="32"
                            Padding="0"
                            Command="{x:Bind ViewModel.CreateNewPlatformTranslationConfigurationCommand, Mode=OneWay}">
                        <SymbolIcon Symbol="Add" />
                    </Button>
                </Grid>

                <ScrollView>
                    <ItemsRepeater ItemsSource="{x:Bind ViewModel.PlatformTranslationConfigurations, Mode=OneWay}"
                                   ItemTemplate="{StaticResource PlatformTranslationConfigurationTemplate}">
                        <ItemsRepeater.Layout>
                            <StackLayout Spacing="16" />
                        </ItemsRepeater.Layout>
                    </ItemsRepeater>
                </ScrollView>
            </StackPanel>
        </Border>
    </StackPanel>
</UserControl>
